(this["webpackJsonpodinbook-react"]=this["webpackJsonpodinbook-react"]||[]).push([[0],{31:function(e,t,c){},33:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),r=c(24),a=c.n(r),i=(c(31),c(5)),l=c.n(i),d=c(4),o=c(8),u=c(6),j=c(2),h=(c(33),c(0)),b=function(e){return e.menuVis?Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"menu__click-area",onClick:e.menuHandler,children:Object(h.jsx)("div",{className:"menu",children:Object(h.jsxs)("div",{className:"menu__item",onClick:e.logOut,children:["Log out @",e.currentUser.handle]})})})}):null},f=function(e){return Object(h.jsxs)("div",{className:"leftsidebar__button",onClick:e.clickHandler,children:[e.children,Object(h.jsx)("div",{className:null==e.text?"":"leftsidebar__text",children:e.text})]})};var _=function(e){return Object(h.jsx)("svg",{height:e.height,className:"leftsidebar__logo",viewBox:"0 0 90 80",children:Object(h.jsx)("g",{id:"Layer_3",children:Object(h.jsx)("path",{d:"M3.161,66.64c12.25,0.541,17.709-1.25,24.375-6.594 c-6.958-0.613-14.333-6.697-14.906-12.438c2.906,0.324,5.072,0.24,7.031-0.281C15.222,45.368,8.245,44.349,5.988,29.95 c3.548,1.898,5.257,2.023,7.485,1.689c-3.646-2.582-5.807-6.836-6.813-10.332C5.46,17.134,6.286,13.39,8.37,8.765 c10.208,12.167,23.666,17.333,35.916,18C41.349,11.671,59.13-2.892,74.067,10.858c4.875,0.031,8.969-3.625,10.906-3.656 c-0.438,3.219-3.959,6.211-6.469,8.75c2.702,0.17,6.156-1,8.334-2.17c-0.817,3.228-5.396,6.545-7.521,8.67 C78.251,49.663,63.04,69.968,35.691,74.214C25.208,75.841,9.886,72.733,3.161,66.64z"})})})};var m=function(e){return Object(h.jsx)("svg",{height:e.height,className:"leftsidebar__icon",viewBox:"0 0 90 80",children:Object(h.jsx)("g",{id:"Layer_1",children:Object(h.jsx)("g",{children:Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"none",d:"M44.711,73.972c4.828,0,9.657,0.078,14.482-0.018 c7.145-0.142,10.468-2.967,11.508-9.945c1.498-10.045,2.764-20.126,4.31-30.164c0.277-1.796-0.243-4.647,2.738-4.777 c2.051-0.09,3.992-0.008,4.365-2.456c0.404-2.645-1.907-3.409-3.679-4.381c-7.254-3.978-14.927-7.337-21.702-12.004 c-8.147-5.614-15.21-5.653-23.396-0.044c-7.071,4.845-15.039,8.384-22.604,12.51c-1.542,0.84-3.071,1.746-2.879,3.859 c0.124,1.378,1.124,2.56,2.289,2.403c4.867-0.646,4.592,2.875,5.017,5.842c1.394,9.715,2.694,19.442,4.145,29.147 c1.049,7.017,4.328,9.855,11.442,10.009C35.4,74.053,40.057,73.971,44.711,73.972z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.711,73.972c-4.655-0.001-9.312,0.081-13.964-0.019 c-7.115-0.154-10.393-2.992-11.442-10.009c-1.451-9.705-2.751-19.432-4.145-29.147c-0.425-2.966-0.15-6.487-5.017-5.842 c-1.165,0.157-2.165-1.025-2.289-2.403c-0.191-2.113,1.338-3.02,2.879-3.859c7.565-4.126,15.532-7.665,22.604-12.51 c8.186-5.608,15.248-5.569,23.396,0.044c6.775,4.667,14.448,8.026,21.702,12.004c1.772,0.972,4.083,1.737,3.679,4.381 c-0.374,2.448-2.314,2.365-4.365,2.456c-2.98,0.13-2.461,2.98-2.738,4.777c-1.545,10.037-2.812,20.118-4.31,30.164 c-1.04,6.979-4.364,9.804-11.508,9.945C54.368,74.05,49.539,73.972,44.711,73.972z M44.989,67.397 c4.487,0,8.98-0.171,13.454,0.05c4.155,0.205,5.905-1.714,6.418-5.633c1.471-11.275,2.999-22.544,4.744-33.779 c0.399-2.574-0.426-3.829-2.504-4.923c-6.408-3.378-12.783-6.821-19.136-10.299c-2.005-1.098-3.862-1.121-5.874-0.019 c-6.506,3.56-13.048,7.055-19.584,10.56c-1.672,0.898-2.503,1.995-2.183,4.13c1.754,11.757,3.343,23.539,5.012,35.309 c0.462,3.257,2.312,4.734,5.68,4.632C35.669,67.285,40.332,67.39,44.989,67.397z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"none",d:"M44.989,67.393c-4.658-0.002-9.32-0.108-13.973,0.032 c-3.369,0.103-5.218-1.375-5.68-4.632c-1.669-11.77-3.258-23.552-5.012-35.309c-0.32-2.136,0.511-3.232,2.183-4.13 c6.536-3.505,13.078-7,19.584-10.56c2.012-1.102,3.869-1.079,5.874,0.019c6.353,3.478,12.728,6.921,19.136,10.299 c2.078,1.095,2.903,2.349,2.504,4.923c-1.745,11.235-3.272,22.504-4.744,33.779c-0.513,3.918-2.263,5.837-6.418,5.633 C53.969,67.226,49.476,67.397,44.989,67.393z M31.772,39.605C31.67,46.79,37.462,52.92,44.61,53.193 c7.224,0.275,13.619-5.967,13.636-13.31c0.018-7.336-5.637-13.323-12.841-13.597C38.101,26.007,31.88,32.084,31.772,39.605z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.772,39.605c0.108-7.521,6.329-13.598,13.633-13.319 c7.204,0.274,12.858,6.261,12.841,13.597c-0.018,7.343-6.412,13.585-13.636,13.31C37.462,52.92,31.67,46.79,31.772,39.605z M45.08,46.642c3.806-0.028,6.985-3.042,7.118-6.745c0.136-3.815-3.317-7.231-7.267-7.188c-3.722,0.039-7.024,3.201-7.123,6.82 C37.702,43.385,41.063,46.673,45.08,46.642z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"none",d:"M45.08,46.642c-4.017,0.031-7.378-3.257-7.272-7.112 c0.099-3.619,3.401-6.781,7.123-6.82c3.95-0.043,7.403,3.373,7.267,7.188C52.065,43.6,48.885,46.613,45.08,46.642z"})]})})})})};var O=function(e){return Object(h.jsx)("svg",{height:e.height,className:"leftsidebar__icon",viewBox:"0 0 90 80",children:Object(h.jsx)("g",{id:"Layer_3",children:Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"none",d:"M44.863,73.862c5.742,0,11.485,0,17.229-0.001 c0.249,0,0.499,0.001,0.748-0.005c8.459-0.197,11.712-5.037,8.674-12.906C67.622,50.875,57.169,44.34,44.951,44.345 C32.773,44.35,22.331,50.928,18.45,61.04c-2.954,7.695,0.248,12.631,8.436,12.791C32.876,73.948,38.87,73.853,44.863,73.862z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"none",d:"M44.904,40.306c5.686-0.022,11.074-0.817,14.278-6.329 c3.927-6.754,1.495-19.613-4.547-24.521c-1.466-1.191-3.082-2.115-4.929-2.603C43.53,5.224,37.766,6.105,33.705,11.2 c-5.188,6.508-6.286,14.205-3.228,21.9C32.969,39.368,38.891,40.279,44.904,40.306z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.863,73.858c-5.993-0.005-11.987,0.09-17.978-0.027 c-8.188-0.16-11.39-5.096-8.436-12.791c3.881-10.111,14.323-16.689,26.501-16.694c12.218-0.005,22.671,6.53,26.563,16.604 c3.038,7.869-0.215,12.709-8.674,12.906c-0.249,0.006-0.499,0.005-0.748,0.005C56.349,73.862,50.605,73.862,44.863,73.858z M44.788,67.812c6.104,0,12.207,0.061,18.309-0.022c3.757-0.051,4.438-1.18,3.09-4.631c-3.114-7.965-11.214-13.098-20.79-13.174 c-10.082-0.08-18.267,4.902-21.565,13.131c-1.384,3.451-0.702,4.617,3.022,4.672C32.83,67.875,38.81,67.811,44.788,67.812z"}),Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.898,40.306c-6.008-0.027-11.93-0.938-14.421-7.206 c-3.059-7.695-1.96-15.393,3.228-21.9c4.061-5.094,9.825-5.976,16.002-4.347c1.847,0.487,3.463,1.412,4.929,2.603 c6.042,4.909,8.474,17.768,4.547,24.521C55.979,39.489,50.59,40.284,44.898,40.306z M55.066,24.456 c0.016-1.652-0.206-4.146-1.173-6.486c-1.521-3.683-4.351-5.798-8.297-6.051c-3.778-0.243-6.909,1.299-8.767,4.656 c-2.348,4.243-2.33,8.887-1.442,13.492c0.372,1.933,1.918,3.15,3.852,3.739c2.297,0.699,4.645,0.89,7.032,0.783 C53.013,34.288,55.186,32.008,55.066,24.456z"})]})})})};var w=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn leftsidebar__useradmin__ellipsis",children:Object(h.jsxs)("g",{fill:"#0F1419",children:[Object(h.jsx)("circle",{className:"btn",cx:"5",cy:"12",r:"2",fill:"#0F1419"}),Object(h.jsx)("circle",{className:"btn",cx:"12",cy:"12",r:"2",fill:"#0F1419"}),Object(h.jsx)("circle",{className:"btn",cx:"19",cy:"12",r:"2",fill:"#0F1419"})]})})},x=function(e){return Object(h.jsx)("div",{className:"leftsidebar__container",children:Object(h.jsxs)("div",{className:"leftsidebar__useradmin",onClick:e.menu,children:[Object(h.jsx)("img",{className:"leftsidebar__useradmin__avatar",src:"img/users/".concat(e.currentUser.photo),alt:"".concat(e.currentUser.name)}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"leftsidebar__useradmin__name",children:e.currentUser.name}),Object(h.jsxs)("div",{className:"leftsidebar__useradmin__handle",children:["@",e.currentUser.handle]})]}),Object(h.jsx)(w,{className:"leftsidebar__useradmin__ellipsis"})]})})},p="26px",g=function(e){var t=function(t){1===t&&e.fetchUser(e.currentUser._id),e.changePage(t)};return Object(h.jsxs)("div",{className:"leftsidebar",children:[Object(h.jsxs)("div",{className:"leftsidebar__upper-container",children:[Object(h.jsx)(f,{clickHandler:function(){return t(0)},children:Object(h.jsx)(_,{height:"29px"})}),Object(h.jsx)(f,{text:"Home",clickHandler:function(){return t(0)},children:Object(h.jsx)(m,{height:p})}),Object(h.jsx)(f,{text:"Profile",clickHandler:function(){return t(1)},children:Object(h.jsx)(O,{height:p})})]}),Object(h.jsx)(x,{menu:e.menu,currentUser:e.currentUser})]})},v=c(3),N=c.n(v),U=function(e){return Object(h.jsxs)("div",{className:"btn tweet__button",children:[Object(h.jsx)("div",{className:"btn tweet__icon-area",children:e.children}),"\xa0\xa0 ",e.data]})};var C=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn tweet__icon",height:e.height?e.height:"18.75",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{className:"btn",d:"M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"})})})};var k=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn tweet__icon",height:e.height?e.height:"18.75",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{className:"btn",d:"M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z"})})})};var T=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn tweet__icon",height:e.height?e.height:"18.75",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{className:"btn",d:"M23.615 15.477c-.47-.47-1.23-.47-1.697 0l-1.326 1.326V7.4c0-2.178-1.772-3.95-3.95-3.95h-5.2c-.663 0-1.2.538-1.2 1.2s.537 1.2 1.2 1.2h5.2c.854 0 1.55.695 1.55 1.55v9.403l-1.326-1.326c-.47-.47-1.23-.47-1.697 0s-.47 1.23 0 1.697l3.374 3.375c.234.233.542.35.85.35s.613-.116.848-.35l3.375-3.376c.467-.47.467-1.23-.002-1.697zM12.562 18.5h-5.2c-.854 0-1.55-.695-1.55-1.55V7.547l1.326 1.326c.234.235.542.352.848.352s.614-.117.85-.352c.468-.47.468-1.23 0-1.697L5.46 3.8c-.47-.468-1.23-.468-1.697 0L.388 7.177c-.47.47-.47 1.23 0 1.697s1.23.47 1.697 0L3.41 7.547v9.403c0 2.178 1.773 3.95 3.95 3.95h5.2c.664 0 1.2-.538 1.2-1.2s-.535-1.2-1.198-1.2z",fill:"#17BF63"})})})};var S=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn tweet__icon",height:e.height?e.height:"18.75",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{className:"btn",d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"})})})};var y=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",height:e.height?e.height:"18.75",children:Object(h.jsx)("g",{fill:"#E0245E",children:Object(h.jsx)("path",{className:"btn",d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z",fill:"#E0245E"})})})};var P=function(e){return Object(h.jsx)("svg",{viewBox:"0 0 24 24",className:"btn tweet__icon",height:e.height?e.height:"18.75",children:Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{className:"btn tweet__icon",d:"M17.53 7.47l-5-5c-.293-.293-.768-.293-1.06 0l-5 5c-.294.293-.294.768 0 1.06s.767.294 1.06 0l3.72-3.72V15c0 .414.336.75.75.75s.75-.336.75-.75V4.81l3.72 3.72c.146.147.338.22.53.22s.384-.072.53-.22c.293-.293.293-.767 0-1.06z"}),Object(h.jsx)("path",{className:"btn tweet__icon",d:"M19.708 21.944H4.292C3.028 21.944 2 20.916 2 19.652V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 1.264-1.028 2.292-2.292 2.292z"})]})})},I=function(e){var t=Object(s.useState)(!1),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(!1),i=Object(j.a)(a,2),l=i[0],d=i[1],o=Object(s.useState)(0),u=Object(j.a)(o,2),b=u[0],f=u[1],_=Object(s.useState)(!1),m=Object(j.a)(_,2),O=m[0],x=m[1],p=Object(s.useState)(0),g=Object(j.a)(p,2),v=g[0],N=g[1],I=Object(s.useState)(!1),F=Object(j.a)(I,2),E=F[0],H=F[1],A=function(){r(!n)},D=function(){return n?Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"btn btn tweet__menu__background",onClick:A})}):null},z=function(){return n?Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"btn tweet__menu__face",onClick:function(){return t=e.tweetId,e.deleteTweet(t),void A();var t},children:"Delete Tweet"})}):null};Object(s.useEffect)((function(){e.likes.includes(e.currentUser._id)&&d(!0),f(e.likes.length)}),[e.likes,e.currentUser._id]);Object(s.useEffect)((function(){e.retweets.includes(e.currentUser._id)?x(!0):x(!1),N(e.retweets.length),H(!1)}),[e.retweets,e.currentUser._id,E]);return Object(h.jsxs)("div",{className:"tweet",onClick:function(t){Array.from(document.querySelectorAll(".btn")).includes(t.target)||e.fetchTweet(e.tweetId)},children:[Object(h.jsx)("div",{className:"tweet__col-1",children:Object(h.jsx)("img",{className:"btn tweet__avatar",src:"img/users/".concat(e.profilePic),alt:"".concat(e.name)})}),Object(h.jsxs)("div",{className:"tweet__col-2",children:[Object(h.jsxs)("div",{className:"tweet__col-2__row-1",children:[Object(h.jsx)("span",{className:"btn tweet__name",onClick:function(){e.fetchUser(e.id),e.changePage(1)},children:e.name}),"\xa0",Object(h.jsxs)("span",{className:"tweet__handle",children:[e.handle,"\xa0\xb7\xa0"]}),Object(h.jsx)("span",{className:"tweet__time",children:e.time}),Object(h.jsx)(D,{}),Object(h.jsx)(z,{}),Object(h.jsx)("span",{className:"tweet__menu",onClick:A,children:e.id===e.currentUser._id?Object(h.jsx)(w,{}):null})]}),Object(h.jsx)("div",{className:"tweet__col-2__row-2",children:e.message}),Object(h.jsx)("div",{className:"tweet__col-2__row-3",children:Object(h.jsxs)("div",{className:"tweet__bottom-bar",children:[Object(h.jsx)(U,{data:e.replies.length,children:Object(h.jsx)(C,{})}),Object(h.jsx)("span",{className:"tweet__retweet-btn",onClick:function(){O?(e.retweetTweet(e.parentTweetId,!1),e.tweetHandler()):(e.retweetTweet(e.tweetId,!0),e.tweetHandler()),H(!0)},children:Object(h.jsx)(U,{data:v,children:O?Object(h.jsx)(T,{}):Object(h.jsx)(k,{})})}),Object(h.jsx)("span",{className:"tweet__like-btn",onClick:function(){l?(d(!1),f(b-1),e.likeTweet(e.tweetId,!1)):(d(!0),f(b+1),e.likeTweet(e.tweetId,!0))},children:Object(h.jsx)(U,{data:b,children:l?Object(h.jsx)(y,{}):Object(h.jsx)(S,{})})}),Object(h.jsx)(U,{children:Object(h.jsx)(P,{})})]})})]})]})},F=c(12),E=c.n(F),H=function(e){var t=Object(s.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],a=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:N()({method:"POST",url:"/api/v1/tweets/",data:{textContent:n,user:e.currentUser._id}}),e.tweetHandler(),r("");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"tweet__compose",children:[Object(h.jsx)("div",{className:"tweet__col-1",children:Object(h.jsx)("img",{className:"tweet__avatar",src:"img/users/".concat(e.currentUser.photo),alt:"user"})}),Object(h.jsxs)("div",{className:"tweet__compose__col-2",children:[Object(h.jsx)(E.a,{className:"tweet__compose__input",placeholder:"What's happening?",onChange:function(e){r(e.target.value)},value:n,maxLength:"280"}),Object(h.jsx)("div",{className:"tweet__compose__footer",children:Object(h.jsx)("button",{className:"tweet__compose--submit",type:"submit",onClick:a,children:"Tweet"})})]})]})},A=c.p+"static/media/loader-gif.efa8b4bf.gif",D=function(){return Object(h.jsx)("div",{className:"loading-tile",children:Object(h.jsx)("img",{className:"loading-tile__gif",src:A,alt:"loading"})})},z=function(e){return Object(h.jsxs)("div",{className:"message-tile",children:[Object(h.jsx)("div",{className:"message-tile__heading",children:e.heading}),Object(h.jsx)("div",{className:"message-tile__message",children:e.message})]})},R=function(e){var t=Object(d.a)(e),c=[];return t.filter((function(e){return e.retweetChild&&!c.includes(e.retweetChild._id)?(c.push(e.retweetChild._id),!0):(!e.retweetChild||!c.includes(e.retweetChild._id))&&!(!e.retweetChild&&c.includes(e._id))}))},M=function(e){var t=Object(s.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(!1),i=Object(j.a)(a,2),o=i[0],b=i[1];Object(s.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/tweets/",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,r(R(c.data.tweets)),b(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]);var f=function(){b(!0)},_=function(e){N.a.delete("/api/v1/tweets/".concat(e)).then((function(t){var c=Object(d.a)(n),s=c.findIndex((function(t){return t.id===e}));c.splice(s,1),r(c)}))};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsx)("div",{className:"mainfeed__header",children:Object(h.jsx)("div",{className:"mainfeed__header__text",children:e.title})}),Object(h.jsx)(H,{currentUser:e.currentUser,tweetHandler:f}),Object(h.jsx)("div",{className:"mainfeed__divider"}),0===n.length?Object(h.jsx)(z,{heading:"Welcome to Twittr!",message:"This is the best place to see what's happening in your world. Find some people to follow now."}):null,e.isLoaded?n.map((function(t){return Object(h.jsx)("div",{className:"tweet__hover-wrapper",children:t.retweetChild?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"retweet__header",children:[Object(h.jsx)(k,{height:"16"}),t.user.name," retweeted"]}),Object(h.jsx)(I,{className:"tweet",name:t.retweetChild.user.name,id:t.retweetChild.user._id,tweetId:t.retweetChild._id,parentTweetId:t._id,handle:"@".concat(t.retweetChild.user.handle),profilePic:t.retweetChild.user.photo,time:t.retweetChild.tweetAge,message:t.retweetChild.textContent,replies:t.retweetChild.replies_short,retweets:t.retweetChild.retweets_short,likes:t.retweetChild.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:_,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:f})]}):Object(h.jsx)(I,{className:"tweet",name:t.user.name,id:t.user._id,tweetId:t._id,handle:"@".concat(t.user.handle),profilePic:t.user.photo,time:t.tweetAge,message:t.textContent,replies:t.replies_short,retweets:t.retweets_short,likes:t.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:_,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:f})},"".concat(t.retweetChild?t.retweetChild._id:t._id))})):Object(h.jsx)(D,{})]})};var L=function(e){return Object(h.jsx)("svg",{onClick:e.changePage,viewBox:"0 0 24 24",className:"btn--back-arrow",height:e.height,children:Object(h.jsx)("g",{fill:"#1DA1F2",children:Object(h.jsx)("path",{d:"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z",fill:"#1DA1F2"})})})},B=function(e){var t;return Object(h.jsxs)("span",{style:{marginRight:"1.5em"},className:"follow",onClick:function(){e.changePage(e.page),e.refreshCurrentUser(),e.refreshSelectedUser()},children:[Object(h.jsx)("strong",{children:(t=e.number,(1*t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}),"\xa0",e.type]})},V=function(e){var t=Object(s.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(!1),i=Object(j.a)(a,2),o=i[0],b=i[1],f=Object(s.useState)(""),_=Object(j.a)(f,2),m=_[0],O=_[1],w=Object(s.useState)(null),x=Object(j.a)(w,2),p=x[0],g=x[1],v=Object(s.useState)(!1),U=Object(j.a)(v,2),C=U[0],T=U[1],S=Object(s.useState)([]),y=Object(j.a)(S,2),P=y[0],F=y[1],E=Object(s.useState)(0),H=Object(j.a)(E,2),A=H[0],z=H[1],M=function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/v1/tweets/user/".concat(e.selectedUser._id),{method:"GET"});case 2:return c=t.sent,t.next=5,c.json();case 5:s=t.sent,r(R(s.userTweets)),b(!1),T(!0);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.selectedUser._id&&function(){t.apply(this,arguments)}()};Object(s.useEffect)((function(){M()}),[o]),Object(s.useEffect)((function(){m?M():O(e.selectedUser._id)}),[m,e.selectedUser._id]);var V=function(e){N.a.delete("/api/v1/tweets/".concat(e)).then((function(t){var c=Object(d.a)(n),s=c.findIndex((function(t){return t.id===e}));c.splice(s,1),r(c)}))},G=function(){if(p)return null;N.a.post("/api/v1/users/follow",{userToFollow:m}).then((function(t){var c=Object(d.a)(P);c.push(e.currentUser._id),F(c),g(!0);var s=A;s++,z(s)}),(function(e){console.log(e)}))},W=function(){N.a.post("/api/v1/users/unfollow",{userToUnfollow:m}).then((function(t){var c=Object(d.a)(P),s=c.indexOf(e.currentUser._id);c.splice(s,1),F(c),g(!1);var n=A;n--,z(n)}),(function(e){console.log(e)}))};Object(s.useEffect)((function(){if(C){var t=Object(d.a)(e.selectedUser.followers);z(t.length)}}),[C]),Object(s.useEffect)((function(){if(C){var t=Object(d.a)(e.selectedUser.followers);F(t),P.includes(e.currentUser._id)?g(!0):g(!1)}}),[C,p]);var q=function(){e.changePage(4)},J=function(){b(!0),M()};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsxs)("div",{className:"mainfeed__header",children:[Object(h.jsx)(L,{height:"22.5px",changePage:function(){return e.changePage(0)}}),Object(h.jsxs)("div",{className:"mainfeed__header__col-2",children:[Object(h.jsx)("div",{className:"mainfeed__header__text",children:e.selectedUser.name}),Object(h.jsxs)("span",{className:"mainfeed__user__tweets",children:[n?n.length:"0"," Tweets"]})]})]}),Object(h.jsx)("div",{className:"mainfeed__banner",children:Object(h.jsx)("div",{className:"mainfeed__user-avatar--wrapper",children:Object(h.jsx)("img",{className:"mainfeed__user-avatar",src:"img/users/".concat(e.selectedUser.photo),alt:"".concat(e.selectedUser.name)})})}),Object(h.jsxs)("div",{className:"mainfeed__bio",children:[Object(h.jsx)("div",{className:"mainfeed__bio__row-1",children:C?e.selectedUser._id===e.currentUser._id?Object(h.jsx)("button",{className:"btn--follow btn--edit",onClick:q,children:"Edit profile"}):p?Object(h.jsx)("button",{className:"btn--following",onClick:W}):Object(h.jsx)("button",{className:"btn--follow",onClick:G,children:"Follow"}):null}),Object(h.jsxs)("div",{className:"mainfeed__bio__row-2",children:[Object(h.jsx)("h2",{className:"mainfeed__user-title",children:e.selectedUser.name}),Object(h.jsxs)("p",{children:["@",e.selectedUser.handle]})]}),Object(h.jsx)("div",{className:"mainfeed__bio__row-3",children:Object(h.jsx)("p",{children:e.selectedUser.bio})}),Object(h.jsxs)("div",{className:"mainfeed__bio__row-5",children:[Object(h.jsx)(B,{type:"Following ",number:e.selectedUser.following_length,page:2,changePage:e.changePage,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser}),Object(h.jsx)(B,{type:"Followers ",number:A,page:3,changePage:e.changePage,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser})]}),Object(h.jsxs)("div",{className:"mainfeed__bio__row-7",children:[Object(h.jsxs)("div",{className:"mainfeed__bio--selected",children:["Tweets",Object(h.jsx)("div",{className:"mainfeed__bio--underline"})]}),Object(h.jsx)("div",{children:"Tweets & replies"}),Object(h.jsx)("div",{children:"Media"}),Object(h.jsx)("div",{children:"Likes"})]})]}),C?n.map((function(t){return Object(h.jsx)("div",{className:"tweet__hover-wrapper",children:t.retweetChild?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"retweet__header",children:[Object(h.jsx)(k,{height:"16"}),t.user.name," retweeted"]}),Object(h.jsx)(I,{className:"tweet",name:t.retweetChild.user.name,id:t.retweetChild.user._id,tweetId:t.retweetChild._id,parentTweetId:t._id,handle:"@".concat(t.retweetChild.user.handle),profilePic:t.retweetChild.user.photo,time:t.retweetChild.tweetAge,message:t.retweetChild.textContent,replies:t.retweetChild.replies_short,retweets:t.retweetChild.retweets_short,likes:t.retweetChild.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:V,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:J})]}):Object(h.jsx)(I,{className:"tweet",name:t.user.name,id:t.user._id,tweetId:t._id,handle:"@".concat(t.user.handle),profilePic:t.user.photo,time:t.tweetAge,message:t.textContent,replies:t.replies_short,retweets:t.retweets_short,likes:t.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:V,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:J})},"".concat(t.retweetChild?t.retweetChild._id:t._id))})):Object(h.jsx)(D,{})]})},G=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"mainfeed__header",children:[Object(h.jsx)(L,{height:"22.5px",changePage:function(){e.fetchUser(e.selectedUser._id),e.changePage(1)}}),Object(h.jsxs)("div",{className:"mainfeed__header__col-2",children:[Object(h.jsx)("div",{className:"mainfeed__header__text",children:e.selectedUser.name}),Object(h.jsxs)("span",{className:"mainfeed__user__tweets",children:["@",e.selectedUser.handle]})]})]}),"Following"===e.type?Object(h.jsxs)("div",{className:"mainfeed__follow__nav",children:[Object(h.jsx)("div",{className:"mainfeed__follow__nav-btn",onClick:function(){return e.changePage(3)},children:"Followers"}),Object(h.jsx)("div",{className:"mainfeed__follow__nav-btn--selected",children:"Following"})]}):Object(h.jsxs)("div",{className:"mainfeed__follow__nav",children:[Object(h.jsx)("div",{className:"mainfeed__follow__nav-btn--selected",children:"Followers"}),Object(h.jsx)("div",{className:"mainfeed__follow__nav-btn",onClick:function(){return e.changePage(2)},children:"Following"})]})]})},W=function(e){var t,c=function(t){Array.from(document.querySelectorAll(".btn")).includes(t.target)||e.fetchUser(e.user._id)};return Object(h.jsxs)("div",{className:"userPreviewTile",onClick:c,children:[Object(h.jsx)("div",{className:"userPreviewTile__col-1",children:Object(h.jsx)("img",{className:"tweet__avatar",src:"img/users/".concat(e.user.photo),alt:"".concat(e.user.name)})}),Object(h.jsxs)("div",{className:"userPreviewTile__col-2",children:[Object(h.jsxs)("div",{className:"userPreviewTile__col-2__row-1",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"userPreviewTile__name",onClick:c,children:e.user.name}),Object(h.jsxs)("div",{className:"userPreviewTile__handle",children:["@",e.user.handle]})]}),(t=e.status,"current user"===t?null:"following"===t?Object(h.jsx)("button",{className:"btn btn--following ",onClick:function(){return e.updateArray(e.user._id,"not following")}}):Object(h.jsx)("button",{className:"btn btn--follow",onClick:function(){return e.updateArray(e.user._id,"following")},children:"Follow"}))]}),Object(h.jsx)("div",{className:"userPreviewTile__col-2__row-2",children:e.user.bio})]})]})},q=function(e,t,c){return Object(d.a)(e).map((function(e){return e._id===c?e.followStatus="current user":t.includes(e._id)?e.followStatus="following":e.followStatus="not following",e}))},J=function(e){return Object(d.a)(e).sort((function(e,t){var c=function(e){return"current user"===e.followStatus?2:"following"===e.followStatus?0:1};return c(e)>c(t)?1:c(e)<c(t)?-1:0}))},Q=function(e,t){"following"===t?N.a.post("/api/v1/users/follow",{userToFollow:e}).then((function(e){console.log(e)}),(function(e){console.log(e)})):"not following"===t&&N.a.post("/api/v1/users/unfollow",{userToUnfollow:e}).then((function(e){console.log(e)}),(function(e){console.log(e)}))},K=function(e){var t=Object(s.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(!1),i=Object(j.a)(a,2),l=i[0],o=i[1];Object(s.useEffect)((function(){N.a.get("/api/v1/users/".concat(e.selectedUser._id,"/following")).then((function(t){r(J(q(t.data.followingInfo,e.currentUser.following,e.currentUser._id))),e.refreshSelectedUser(),e.refreshCurrentUser(),o(!0)}))}),[l]);var u=function(e,t){var c=Object(d.a)(n),s=c.findIndex((function(t){return t._id===e}));c[s].followStatus=t,Q(e,t),r(c)};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsx)(G,{type:"Following",selectedUser:e.selectedUser,changePage:e.changePage,fetchUser:e.fetchUser}),Object(h.jsx)("div",{className:"mainfeed__follow-list",children:0===e.selectedUser.following.length?Object(h.jsx)(z,{heading:"@".concat(e.selectedUser.handle," isn't following anyone"),message:"When they do, they'll be listed here."}):n.map((function(t){return Object(h.jsx)(W,{user:t,status:t.followStatus,updateArray:u,fetchUser:e.fetchUser,refreshSelectedUser:e.refreshSelectedUser},t._id)}))})]})},X=function(e){var t=Object(s.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(!1),i=Object(j.a)(a,2),l=i[0],o=i[1];Object(s.useEffect)((function(){N.a.get("/api/v1/users/".concat(e.selectedUser._id,"/followers")).then((function(t){r(J(q(t.data.followersInfo,e.currentUser.following,e.currentUser._id))),e.refreshSelectedUser(),e.refreshCurrentUser(),o(!0)}))}),[l]);var u=function(e,t){var c=Object(d.a)(n),s=c.findIndex((function(t){return t._id===e}));c[s].followStatus=t,Q(e,t),r(c)};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsx)(G,{type:"Followers",selectedUser:e.selectedUser,changePage:e.changePage,fetchUser:e.fetchUser}),Object(h.jsx)("div",{className:"mainfeed__follow-list",children:0===e.selectedUser.followers.length?Object(h.jsx)(z,{heading:"@".concat(e.selectedUser.handle," doesn't have any followers"),message:"When someone follows them, they'll be listed here."}):n.map((function(t){return Object(h.jsx)(W,{user:t,status:t.followStatus,updateArray:u,fetchUser:e.fetchUser},t._id)}))})]})},Y=function(e){var t=Object(s.useState)({name:" ",bio:""}),c=Object(j.a)(t,2),n=c[0],r=c[1];Object(s.useEffect)((function(){r({name:e.currentUser.name,bio:e.currentUser.bio})}),[]);var a=function(e){if(!("name"===e.target.name&&e.target.value.length>35)&&!("bio"===e.target.name&&e.target.value.length>160)){var t=Object(o.a)({},n);t[e.target.name]=e.target.value,r(t)}},i=function(){var t=new FormData;t.append("name",n.name),t.append("bio",n.bio),t.append("photo",document.getElementById("photo").files[0]),N.a.post("/api/v1/users/updateUser",t).then((function(t){e.refreshCurrentUser(),e.refreshSelectedUser(),e.changePage(1)}),(function(e){console.log(e)}))};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsxs)("div",{className:"mainfeed__header",children:[Object(h.jsx)(L,{height:"22.5px",changePage:function(){return e.changePage(1)}}),Object(h.jsx)("div",{className:"mainfeed__header__col-2",children:Object(h.jsx)("div",{className:"mainfeed__header__text",children:e.currentUser.name})})]}),Object(h.jsx)("div",{className:"mainfeed__banner",children:Object(h.jsx)("div",{className:"mainfeed__user-avatar--wrapper",children:Object(h.jsx)("label",{htmlFor:"photo",children:Object(h.jsx)("img",{className:"mainfeed__user-avatar update-user__avatar",src:"img/users/".concat(e.currentUser.photo),alt:"".concat(e.currentUser.name)})})})}),Object(h.jsxs)("div",{className:"mainfeed__bio",children:[Object(h.jsx)("div",{className:"mainfeed__bio__row-1",children:Object(h.jsx)("button",{className:"btn--save",onClick:i,children:"Save"})}),Object(h.jsx)("div",{className:"update-user__photo-upload",children:Object(h.jsx)("input",{className:"register__upload",type:"file",accept:"image/*",id:"photo",name:"photo"})}),Object(h.jsxs)("div",{className:"update-user__bio__row-2",children:[Object(h.jsx)("input",{className:"update-user__name-input",onChange:a,name:"name",value:n.name,placeholder:"Full Name"}),Object(h.jsxs)("p",{children:["@",e.currentUser.handle]})]}),Object(h.jsxs)("div",{className:"mainfeed__bio__row-3",children:[Object(h.jsx)("textarea",{className:"bioInput",onChange:a,value:n.bio,id:"bio",name:"bio"}),Object(h.jsxs)("div",{className:"update-user__bio-counter",children:[n.bio?n.bio.length:"0","/160"]})]}),Object(h.jsx)("div",{className:"mainfeed__bio__row-5"})]})]})},Z=c(13),$=function(e){var t=Object(s.useState)({}),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(""),i=Object(j.a)(a,2),o=i[0],b=i[1],f=Object(s.useState)([]),_=Object(j.a)(f,2),m=_[0],O=_[1],w=Object(s.useState)(!1),x=Object(j.a)(w,2),p=x[0],g=x[1],v=Object(s.useState)(!1),T=Object(j.a)(v,2),F=T[0],H=T[1],A=Object(s.useState)(!1),z=Object(j.a)(A,2),M=z[0],B=z[1],V=Object(s.useState)(0),G=Object(j.a)(V,2),W=G[0],q=G[1];Object(Z.useEffect)((function(){n.tweetDetails&&J()}),[n,p]),Object(Z.useEffect)((function(){F&&(n.tweetDetails.likes.includes(e.currentUser._id)&&B(!0),q(n.tweetDetails.likes.length))}),[n,e.currentUser._id,F]);var J=function(){N()({method:"GET",url:"/tweets/".concat(n.tweetDetails.tweetId,"/replies")}).then((function(e){O(R(e.data.data.tweets)),H(!0),g(!1)}))};Object(Z.useEffect)((function(){r(e.selectedTweet)}),[e.selectedTweet]);var Q=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=2;break}return t.abrupt("return");case 2:N()({method:"POST",url:"/api/v1/tweets/",data:{textContent:o,user:e.currentUser._id,replyParent:n.tweetDetails.tweetId}}),K(),b("");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){g(!0)},X=function(e){N.a.delete("/api/v1/tweets/".concat(e)).then((function(t){var c=Object(d.a)(m),s=c.findIndex((function(t){return t.id===e}));c.splice(s,1),O(c)}))},Y=function(t){if(e.curUserRetweets&&0!==e.curUserRetweets.length){var c=e.curUserRetweets.findIndex((function(e){return e.retweetChild===t}));if(!(c<0))return e.curUserRetweets[c]._id}};return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsxs)("div",{className:"mainfeed__header",children:[Object(h.jsx)(L,{height:"22.5px",changePage:function(){return e.changePage(0)}}),Object(h.jsx)("div",{className:"mainfeed__header__col-2",children:Object(h.jsx)("div",{className:"mainfeed__header__text",children:"Tweet"})})]}),Object(h.jsx)("div",{className:"tweet-expanded",children:n.userDetails?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"tweet-expanded__row-1",children:[Object(h.jsx)("img",{className:"tweet__avatar",src:"img/users/".concat(n.userDetails.photo),alt:"".concat(n.userDetails.name)}),Object(h.jsxs)("div",{className:"tweet-expanded__row-1__col-2",children:[Object(h.jsx)("div",{className:"tweet-expanded__row-1__col-2__name",onClick:function(){return e.fetchUser(n.userDetails.id)},children:n.userDetails.name}),"@",n.userDetails.handle]})]}),Object(h.jsx)("div",{className:"tweet-expanded__row-2",children:n.tweetDetails.textContent}),Object(h.jsx)("div",{className:"tweet-expanded__row-3",children:n.tweetDetails.dateAdded}),Object(h.jsxs)("div",{className:"tweet-expanded__row-4",children:[Object(h.jsx)("strong",{children:W}),"\xa0Likes"]}),Object(h.jsxs)("div",{className:"tweet-expanded__row-5",children:[Object(h.jsx)(U,{children:Object(h.jsx)(C,{height:"24"})}),Object(h.jsx)(U,{children:Object(h.jsx)(k,{height:"24"})}),Object(h.jsx)("span",{className:"tweet__like-btn",onClick:function(){M?N.a.patch("/api/v1/tweets/".concat(n.tweetDetails.tweetId,"/unlike")).then((function(e){B(!1),q(W-1)})):N.a.patch("/api/v1/tweets/".concat(n.tweetDetails.tweetId,"/like")).then((function(e){B(!0),q(W+1)}))},children:Object(h.jsx)(U,{children:M?Object(h.jsx)(y,{height:"24"}):Object(h.jsx)(S,{height:"24"})})}),Object(h.jsx)(U,{children:Object(h.jsx)(P,{height:"24"})})]}),Object(h.jsxs)("div",{className:"tweet-expanded__reply",children:[Object(h.jsx)("div",{className:"tweet-expanded__reply__col-1",children:Object(h.jsx)("img",{className:"tweet__avatar",src:"img/users/".concat(e.currentUser.photo),alt:"".concat(e.currentUser.name)})}),Object(h.jsx)("div",{className:"tweet-expanded__reply__col-2",children:Object(h.jsx)(E.a,{className:"tweet__compose__input",placeholder:"Tweet your reply",onChange:function(e){b(e.target.value)},value:o,maxLength:"280"})}),Object(h.jsx)("div",{className:"tweet-expanded__reply__col-3 tweet-expanded__btn--right",children:Object(h.jsx)("button",{className:"tweet__compose--submit tweet-expanded__btn",type:"submit",onClick:Q,children:"Reply"})})]})]}):null}),Object(h.jsx)("div",{className:"mainfeed__divider"}),Object(h.jsx)("div",{children:F?m.map((function(t){return Object(h.jsx)("div",{className:"tweet__hover-wrapper",children:t.retweetChild?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"retweet__header",children:[Object(h.jsx)(k,{height:"16"}),t.user.name," retweeted"]}),Object(h.jsx)(I,{className:"tweet",name:t.retweetChild.user.name,id:t.retweetChild.user._id,tweetId:t.retweetChild._id,parentTweetId:t._id,handle:"@".concat(t.retweetChild.user.handle),profilePic:t.retweetChild.user.photo,time:t.retweetChild.tweetAge,message:t.retweetChild.textContent,replies:t.retweetChild.replies_short,retweets:t.retweetChild.retweets_short,likes:t.retweetChild.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:X,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:K})]}):Object(h.jsx)(I,{className:"tweet",name:t.user.name,id:t.user._id,tweetId:t._id,parentTweetId:Y(t._id),handle:"@".concat(t.user.handle),profilePic:t.user.photo,time:t.tweetAge,message:t.textContent,replies:t.replies_short,retweets:t.retweets_short,likes:t.likes,fetchUser:e.fetchUser,changePage:e.changePage,currentUser:e.currentUser,deleteTweet:X,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,tweetHandler:K})},"".concat(t.retweetChild?t.retweetChild._id:t._id))})):Object(h.jsx)(D,{})})]})},ee=function(e){return Object(h.jsxs)("div",{className:"mainfeed",children:[Object(h.jsxs)("div",{className:"mainfeed__header",children:[Object(h.jsx)(L,{height:"22.5px",changePage:function(){return e.changePage(0)}}),Object(h.jsx)("div",{className:"mainfeed__header__col-2",children:Object(h.jsx)("div",{className:"mainfeed__header__text",children:"Error"})})]}),Object(h.jsx)(z,{heading:"404: Page Not Found",message:"The resource you are looking for cannot be found."})]})},te=function(e){switch(e.page){case 0:return Object(h.jsx)(M,{title:"Home",changePage:e.changePage,currentUser:e.currentUser,fetchUser:e.fetchUser,isLoaded:e.isLoaded,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet});case 1:return Object(h.jsx)(V,{title:"User",changePage:e.changePage,selectedUser:e.selectedUser,currentUser:e.currentUser,fetchUser:e.fetchUser,isLoaded:e.isLoaded,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet});case 2:return Object(h.jsx)(K,{selectedUser:e.selectedUser,changePage:e.changePage,currentUser:e.currentUser,fetchUser:e.fetchUser,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser});case 3:return Object(h.jsx)(X,{selectedUser:e.selectedUser,changePage:e.changePage,currentUser:e.currentUser,fetchUser:e.fetchUser,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser});case 4:return Object(h.jsx)(Y,{title:"Update",changePage:e.changePage,currentUser:e.currentUser,refreshCurrentUser:e.refreshCurrentUser,refreshSelectedUser:e.refreshSelectedUser});case 5:return Object(h.jsx)($,{changePage:e.changePage,selectedTweet:e.selectedTweet,currentUser:e.currentUser,fetchUser:e.fetchUser,likeTweet:e.likeTweet,retweetTweet:e.retweetTweet,fetchTweet:e.fetchTweet,curUserRetweets:e.curUserRetweets});default:return Object(h.jsx)(ee,{changePage:e.changePage})}},ce=function(e){var t,c=function(t){Array.from(document.querySelectorAll(".btn")).includes(t.target)||e.fetchUser(e.user._id)};return Object(h.jsxs)("div",{className:"userSideTile",onClick:c,children:[Object(h.jsx)("div",{className:"userSideTile__col-1",children:Object(h.jsx)("img",{className:"tweet__avatar",src:"img/users/".concat(e.user.photo),alt:"".concat(e.user.name)})}),Object(h.jsxs)("div",{className:"userSideTile__col-2",children:[Object(h.jsxs)("div",{className:"userSideTile__col-2__row-1",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"userSideTile__name",onClick:c,children:e.user.name}),Object(h.jsxs)("div",{className:"userSideTile__handle",children:["@",e.user.handle]})]}),(t=e.status,"current user"===t?null:"following"===t?Object(h.jsx)("button",{id:"btn-follow",className:"btn btn--following  userSideTile__btn--following ",onClick:function(){return e.updateArray(e.user._id,"not following")}}):Object(h.jsx)("button",{id:"btn-follow",className:"btn btn--follow userSideTile__btn--follow",onClick:function(){return e.updateArray(e.user._id,"following")},children:"Follow"}))]}),Object(h.jsx)("div",{className:"userSideTile__col-2__row-2",children:e.user.bio})]})]})},se=function(e){var t=Object(s.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1];Object(s.useEffect)((function(){a()}),[]);var a=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/v1/users/whoToFollow").then((function(e){var t=Object(d.a)(e.data.whoToFollow);r(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(e,t){var c=Object(d.a)(n),s=c.findIndex((function(t){return t._id===e}));c[s].followStatus=t,Q(e,t),r(c)};return Object(h.jsxs)("div",{className:"who-to-follow",children:[Object(h.jsx)("div",{className:"who-to-follow__header__text",children:"Who To Follow"}),n.map((function(t){return Object(h.jsx)(ce,{user:t,status:t.followStatus,updateArray:i,fetchUser:e.fetchUser},t._id)}))]})},ne=function(){return Object(h.jsxs)("div",{className:"signature",children:[Object(h.jsx)("div",{children:"alvin.cousins@googlemail.com"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("strong",{className:"signature__label",children:"Back-end:"}),"\xa0",Object(h.jsx)("a",{className:"signature__link",target:"_blank",rel:"noreferrer",href:"https://github.com/ajcousins/odinbook",children:"github.com/ajcousins/odinbook"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("strong",{className:"signature__label",children:"Front-end:"}),"\xa0",Object(h.jsx)("a",{className:"signature__link",target:"_blank",rel:"noreferrer",href:"https://github.com/ajcousins/odinbook-react",children:"github.com/ajcousins/odinbook-react"})]})]})},re=function(e){return Object(h.jsxs)("div",{className:"rightsidebar",children:[Object(h.jsx)(se,{fetchUser:e.fetchUser}),Object(h.jsx)(ne,{})]})},ae=c(25),ie=c.n(ae),le=c(26),de=c.n(le),oe=function(e){var t=Object(s.useState)({}),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)({email:!1,name:!1,handle:!1,password:!1,passwordConfirm:!1}),i=Object(j.a)(a,2),l=i[0],d=i[1],u=Object(s.useState)(""),b=Object(j.a)(u,2),f=b[0],m=b[1],O=Object(s.useState)(0),w=Object(j.a)(O,2),x=w[0],p=w[1],g=Object(s.useState)("default.jpg"),v=Object(j.a)(g,2),U=v[0],C=v[1],k=function(e){var t=n;t[e.target.name]=e.target.value,r(t),S()},T=function(){p(x+1)},S=function(){var e=Object(o.a)({},l);n.email&&(e.email=ie()(n.email)),n.name&&(e.name=n.name.length>2),n.handle&&(e.handle=n.handle.length>2),n.password&&(e.password=de()(n.password,{minSymbols:0,minUppercase:0,minLowercase:0,minNumbers:0})),n.passwordConfirm&&(e.passwordConfirm=n.passwordConfirm===n.password),d(e)},y=function(){d({email:!1,name:!1,handle:!1,password:!1,passwordConfirm:!1}),r({}),p(0),e.logOut(),e.clickHandler()};if(!e.formActive)return null;switch(x){case 0:return Object(h.jsxs)("div",{className:"register__wrapper",children:[Object(h.jsx)("div",{className:"register__background",onClick:y}),Object(h.jsxs)("form",{className:"register__form",children:[Object(h.jsx)("div",{className:"register__header",children:Object(h.jsx)(_,{height:"29px"})}),Object(h.jsx)("h2",{className:"register__title",children:"Create your account"}),Object(h.jsx)("input",{name:"email",className:"login__input ".concat(!n.email||l.email?null:"login__invalid"),onChange:k,placeholder:"Email"}),Object(h.jsx)("input",{name:"name",className:"login__input ".concat(!n.name||l.name?null:"login__invalid"),onChange:k,placeholder:"Full Name"}),Object(h.jsx)("input",{name:"handle",className:"login__input ".concat(!n.handle||l.handle?null:"login__invalid"),onChange:k,placeholder:"Handle"}),Object(h.jsx)("input",{name:"password",className:"login__input ".concat(!n.password||l.password?null:"login__invalid"),onChange:k,placeholder:"Password",type:"password"}),Object(h.jsx)("input",{name:"passwordConfirm",className:"login__input ".concat(!n.passwordConfirm||l.passwordConfirm?null:"login__invalid"),onChange:k,placeholder:"Confirm Password",type:"password"}),Object(h.jsx)("div",{className:"btn__footer",children:Object.values(l).every((function(e){return!0===e}))?Object(h.jsx)("button",{type:"submit",className:"btn--next",onClick:function(e){e.preventDefault(),N.a.post("/api/v1/users/signup",n).then((function(e){201===e.status&&(T(),r({}))}),(function(e){console.log(e)}))},children:"Next"}):Object(h.jsx)("button",{type:"submit",className:"btn--next btn--disable",children:"Next"})})]})]});case 1:return Object(h.jsxs)("div",{className:"register__wrapper",children:[Object(h.jsx)("div",{className:"register__background",onClick:y}),Object(h.jsxs)("form",{className:"register__form",children:[Object(h.jsx)("div",{className:"register__header",children:Object(h.jsx)(_,{height:"29px"})}),Object(h.jsx)("h2",{className:"register__title",children:"Pick a profile picture"}),Object(h.jsx)("p",{children:"Have a favourite selfie? Upload it now."}),Object(h.jsx)("input",{className:"register__upload",type:"file",accept:"image/*",id:"photo",name:"photo"}),Object(h.jsxs)("div",{className:"btn__footer",children:[Object(h.jsx)("button",{className:"btn--skip",onClick:T,children:"Skip for now"}),Object(h.jsx)("button",{type:"submit",className:"btn--next",onClick:function(e){e.preventDefault();var t=new FormData;t.append("photo",document.getElementById("photo").files[0]),N.a.post("/api/v1/users/updateUser",t).then((function(e){var t=e.data.data.user.photo;C(t),T()}),(function(e){console.log(e)}))},children:"Next"})]})]})]});case 2:return Object(h.jsxs)("div",{className:"register__wrapper",children:[Object(h.jsx)("div",{className:"register__background",onClick:y}),Object(h.jsxs)("div",{className:"register__form",children:[Object(h.jsx)("div",{className:"register__header",children:Object(h.jsx)(_,{height:"29px"})}),Object(h.jsx)("h2",{className:"register__title",children:"Looking good!"}),Object(h.jsx)("p",{children:"Not happy with your photo? If not, go back and reupload."}),Object(h.jsx)("div",{className:"register__avatar-wrapper",children:Object(h.jsx)("img",{className:"register__avatar-preview",src:"img/users/".concat(U),alt:"user"})}),Object(h.jsxs)("div",{className:"btn__footer",children:[Object(h.jsx)("button",{className:"btn--skip",onClick:function(){p(x-1)},children:"Go back"}),Object(h.jsx)("button",{type:"submit",className:"btn--next",onClick:T,children:"Next"})]})]})]});case 3:return Object(h.jsxs)("div",{className:"register__wrapper",children:[Object(h.jsx)("div",{className:"register__background",onClick:y}),Object(h.jsxs)("div",{className:"register__form",children:[Object(h.jsx)("div",{className:"register__header",children:Object(h.jsx)(_,{height:"29px"})}),Object(h.jsx)("h2",{className:"register__title",children:"Describe yourself"}),Object(h.jsx)("p",{children:"What makes you special? Don't think too hard, just have fun with it."}),Object(h.jsx)("textarea",{className:"bioInput",onChange:function(e){var t;e.target.value.length>160||(t=e.target.value,m(t))},value:f,id:"bio"}),Object(h.jsxs)("div",{className:"register__bio-counter",children:[f.length,"/160"]}),Object(h.jsxs)("div",{className:"btn__footer",children:[Object(h.jsx)("button",{className:"btn--skip",onClick:T,children:"Skip for now"}),Object(h.jsx)("form",{children:Object(h.jsx)("button",{type:"submit",className:"btn--next",onClick:function(e){e.preventDefault();var t=new FormData;t.append("bio",document.getElementById("bio").value),N.a.post("/api/v1/users/updateUser",t).then((function(e){T()}),(function(e){console.log(e)}))},children:"Next"})})]})]})]});case 4:return Object(h.jsxs)("div",{className:"register__wrapper",children:[Object(h.jsx)("div",{className:"register__background",onClick:y}),Object(h.jsxs)("div",{className:"register__form",children:[Object(h.jsxs)("div",{className:"register__success-page",children:[Object(h.jsx)("div",{className:"register__spacer"}),Object(h.jsx)(_,{height:"44px",className:"register__logo__success"}),Object(h.jsx)("h2",{className:"register__title",children:"Success!"}),Object(h.jsxs)("p",{style:{whiteSpace:"pre-wrap",textAlign:"center"},children:["Get the most out of Twittr by staying up to date with ","\n","what's happening."]})]}),Object(h.jsx)("div",{className:"btn__footer",children:Object(h.jsx)("button",{className:"btn--next",onClick:function(){e.clickHandler(),p(0)},children:"Go to login!"})})]})]});default:return null}},ue=function(e){var t=Object(s.useState)({}),c=Object(j.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(""),i=Object(j.a)(a,2),d=i[0],o=i[1],b=Object(s.useState)(!1),f=Object(j.a)(b,2),m=f[0],O=f[1],w=Object(s.useState)(null),x=Object(j.a)(w,2),p=x[0],g=x[1],v=function(e){var t=n;t[e.target.name]=e.target.value,r(t)},U=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N.a.post("/api/v1/users/login",n).then((function(t){var c=t.data;o(c.token),e.tokenHandler(d)})).catch((function(e){console.log(e),g("The username and password you entered did not match our records. Please double-check and try again.")}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){O(!m)};return Object(h.jsxs)("div",{className:"wrapper-login",children:[Object(h.jsx)(oe,{formActive:m,clickHandler:C,logOut:e.logOut}),Object(h.jsxs)("form",{className:"login",children:[Object(h.jsx)(_,{height:"40px"}),Object(h.jsx)("h1",{className:"login__title",children:"Log in to Twittr"}),p?Object(h.jsx)("div",{className:"login__error-message",children:p}):null,Object(h.jsx)("input",{id:"email",name:"email",className:"login__input",type:"text",placeholder:"Email",onChange:v}),Object(h.jsx)("input",{id:"password",name:"password",className:"login__input",type:"password",placeholder:"Password",onChange:v}),Object(h.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),U()},children:"Log in"}),Object(h.jsx)("div",{className:"login__footer",children:Object(h.jsx)("button",{className:"link-btn",onClick:C,children:"Sign up for Twittr"})})]})]})};var je=function(){var e=Object(s.useState)({}),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(!1),a=Object(j.a)(r,2),i=a[0],f=a[1],_=Object(s.useState)(!1),m=Object(j.a)(_,2),O=m[0],w=m[1],x=Object(s.useState)({}),p=Object(j.a)(x,2),v=p[0],U=p[1],C=Object(s.useState)({}),k=Object(j.a)(C,2),T=k[0],S=k[1],y=Object(s.useState)({}),P=Object(j.a)(y,2),I=P[0],F=P[1],E=Object(s.useState)([]),H=Object(j.a)(E,2),A=H[0],D=H[1],z=Object(s.useState)([]),R=Object(j.a)(z,2),M=R[0],L=R[1],B=Object(s.useState)(!1),V=Object(j.a)(B,2),G=V[0],W=V[1],q=Object(s.useState)(0),J=Object(j.a)(q,2),Q=J[0],K=J[1];Object(s.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,c,s,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://hydro-eds-18702.herokuapp.com/tweets/",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:"fail"===(c=e.sent).status||"error"===c.status||null===c.status?f(!1):(f(!0),w(!0),s=Object(o.a)({},c.data.currentUser),n=Object(d.a)(c.data.currentUser.likedTweets),r=Object(d.a)(c.data.currentUser.retweetedTweets),U(s),D(n),L(r)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),f(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]);var X=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://hydro-eds-18702.herokuapp.com/api/v1/users/current").then((function(e){var t=Object(o.a)({},e.data.data.currentUser);U(t);var c=t.retweetedTweets;L(c)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T._id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.a.get("https://hydro-eds-18702.herokuapp.com/api/v1/users/".concat(T._id)).then((function(e){var t=Object(o.a)({},e.data.data.user);S(t)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){N.a.get("https://hydro-eds-18702.herokuapp.com/api/v1/users/".concat(e)).then((function(e){S(e.data.data.user)})),ce(1)},$=function(){W(!G)},ee=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://hydro-eds-18702.herokuapp.com/api/v1/users/logout",{method:"GET"});case 3:n({}),f(!1),w(!1),U({}),S({}),D([]),W(!1),K(0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),ce=function(e){0===e&&(S({}),F({})),K(e)};return i?Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("div",{className:"wrapper-main",children:[Object(h.jsx)(b,{menuVis:G,menuHandler:$,logOut:ee,currentUser:v}),Object(h.jsx)(g,{menu:$,currentUser:v,changePage:ce,fetchUser:Z}),Object(h.jsx)(te,{header:c,currentUser:v,selectedUser:T,page:Q,changePage:ce,fetchUser:Z,isLoaded:O,refreshCurrentUser:X,refreshSelectedUser:Y,likeTweet:function(e,t){var c=Object(d.a)(A);t?N.a.patch("https://hydro-eds-18702.herokuapp.com/api/v1/tweets/".concat(e,"/like")).then((function(t){c.push(e),D(c)})):N.a.patch("https://hydro-eds-18702.herokuapp.com/api/v1/tweets/".concat(e,"/unlike")).then((function(t){var s=c.findIndex((function(t){return t===e}));c.splice(s,1),D(c)}))},retweetTweet:function(e,t){t?N()({method:"POST",url:"https://hydro-eds-18702.herokuapp.com/api/v1/tweets/",data:{user:v._id,retweetChild:e}}).then((function(e){X(),Y()})):N()({method:"POST",url:"https://hydro-eds-18702.herokuapp.com/api/v1/tweets/undoRetweet",data:{retweetParent:e}}).then((function(e){X(),Y()}))},fetchTweet:function(e){var t=Object(o.a)({},I);N.a.get("https://hydro-eds-18702.herokuapp.com/api/v1/tweets/".concat(e)).then((function(e){var c={tweetId:e.data.data.tweet._id,textContent:e.data.data.tweet.textContent,dateAdded:e.data.data.tweet.dateAdded_expand,likes:e.data.data.tweet.likes,likesQty:e.data.data.tweet.likes.length};N.a.get("https://hydro-eds-18702.herokuapp.com/api/v1/users/".concat(e.data.data.tweet.user)).then((function(e){var s={name:e.data.data.user.name,handle:e.data.data.user.handle,photo:e.data.data.user.photo,id:e.data.data.user._id};t.tweetDetails=c,t.userDetails=s,F(t)}))})),ce(5)},selectedTweet:I,curUserRetweets:M}),Object(h.jsx)(re,{fetchUser:Z})]})}):Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(ue,{tokenHandler:function(e){n({Authorization:"Bearer ".concat(e)}),f(!0)},logOut:ee})})},he=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),r(e),a(e)}))};a.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(je,{})}),document.getElementById("root")),he()}},[[63,1,2]]]);
//# sourceMappingURL=main.97d7045c.chunk.js.map